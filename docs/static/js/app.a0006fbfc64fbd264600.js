webpackJsonp([1],{"/28v":function(t,e,n){"use strict";function s(t){n("5zY9")}var i=n("W7vk"),a=n("UcsQ"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-3e048fc5",null);e.a=c.exports},"0REC":function(t,e,n){"use strict";e.a={name:"action",data:function(){return{text:""}},methods:{add:function(){console.log(this.text),this.$store.dispatch({type:"addMenu",text:this.text}),this.text=""}}}},"40sN":function(t,e,n){"use strict";function s(t){n("WSRv")}var i=n("RePM"),a=n("UmYa"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-3bc07730",null);e.a=c.exports},"5zY9":function(t,e){},"6tPD":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"svg-chart"},[n("div",[n("div",{staticClass:"menu-perc"},[n("div",{}),t._v(" "),n("div",{staticClass:"menu-name"},[t._v("\n        "+t._s(t.option.name)+":\n      ")]),t._v(" "),n("div",{staticClass:"percent"},[n("div",{style:{width:100*t.percent+"%"}},[n("h3",[t._v(t._s(100*t.percent+"%"))])])]),t._v(" "),n("div",{staticClass:"pie-yum"},[n("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 32 32"}},[n("circle",{attrs:{id:"background",r:"16",cx:"16",cy:"16",fill:"#fff",stroke:"yellow","stroke-width":"12"}}),t._v(" "),n("circle",{attrs:{id:"percent",r:"16",cx:"16",cy:"16",fill:"#fff","fill-opacity":"0.5",stroke:"deeppink","stroke-width":"12","stroke-dasharray":t.percentStr}})])])])])])},i=[],a={render:s,staticRenderFns:i};e.a=a},"8KHZ":function(t,e,n){"use strict";function s(t){n("WuTF")}var i=n("0REC"),a=n("Atfl"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-42e09154",null);e.a=c.exports},AYdz:function(t,e,n){"use strict";function s(t){n("SLUT")}var i=n("YhF4"),a=n("6tPD"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-27895f78",null);e.a=c.exports},Atfl:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"caiinput",attrs:{placeholder:"菜品"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.add}},[t._v("保存")])])])},i=[],a={render:s,staticRenderFns:i};e.a=a},"D+VX":function(t,e,n){"use strict";var s=n("mtWM"),i=(n.n(s),{currentUser:"",isAuthenticated:!1}),a={login:function(t,e){var n=e.text;t.isAuthenticated=!0,t.currentUser=n}},r={};e.a={state:i,mutations:a,actions:r}},FcqW:function(t,e,n){"use strict";e.a={name:"vote-option",props:["menu","showNames"],computed:{eachShowNames:function(){var t=this;return this.showNames.filter(function(e){return e.menuId==t.menu.id})},voted:function(){var t=this;return this.eachShowNames.filter(function(e){return e.userName===t.currentUser}).length},currentUser:function(){return this.$store.state.auth.currentUser}},methods:{vote:function(){if(!this.voted&&this.currentUser){var t={userName:this.currentUser,menuId:this.menu.id};this.$store.dispatch({type:"vote",vote:t})}},undo:function(){var t=this,e=this.eachShowNames.find(function(e){return e.userName===t.currentUser});this.$store.dispatch({type:"undo",voteId:e.id})}}}},Fs8J:function(t,e,n){"use strict";var s=n("gosb"),i=n("/28v"),a=n("8KHZ"),r=n("40sN");e.a={name:"home",components:{LoginForm:s.a,Voting:i.a,Action:a.a,Chart:r.a}}},IcnI:function(t,e,n){"use strict";var s=n("7+uW"),i=n("NYxO"),a=n("D+VX"),r=n("egBL"),o=n("bREw");s.a.use(i.a),e.a=new i.a.Store({modules:{auth:a.a,menu:r.a,user:o.a}})},"J+oA":function(t,e,n){"use strict";function s(t){n("YmLR")}var i=n("FcqW"),a=n("ve8r"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-fbb178c6",null);e.a=c.exports},M93x:function(t,e,n){"use strict";function s(t){n("jkTi")}var i=n("xJD8"),a=n("wh2b"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,null,null);e.a=c.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i=n("M93x"),a=n("IcnI");s.a.config.productionTip=!1,new s.a({el:"#app",store:a.a,template:"<App/>",components:{App:i.a}})},RePM:function(t,e,n){"use strict";var s=n("AYdz");e.a={name:"chart",components:{SvgChart:s.a},computed:{menus:function(){return this.$store.state.menu.all},showNames:function(){return this.$store.state.user.all},sortedOptions:function(){var t=this;return this.menus.map(function(e){var n=t.showNames.filter(function(t){return t.menuId==e.id}).length;return{name:e.text,id:e.id,voteCount:n}}).sort(function(t,e){return t.voteCount-e.voteCount}).slice().reverse()}}}},SLUT:function(t,e){},"Sx/W":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"login-wrap"},[n("login-form")],1),t._v(" "),n("div",{staticClass:"voting-wrap"},[n("voting")],1),t._v(" "),n("div",{staticClass:"action-wrap"},[n("action")],1),t._v(" "),n("div",{staticClass:"chart-wrap"},[n("chart")],1)])},i=[],a={render:s,staticRenderFns:i};e.a=a},UcsQ:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voting"},t._l(t.menus,function(e){return n("div",{staticClass:"menu-item"},[n("vote-option",{attrs:{menu:e,showNames:t.showNames}})],1)}))},i=[],a={render:s,staticRenderFns:i};e.a=a},UmYa:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart"},t._l(t.sortedOptions,function(t){return n("div",{staticClass:"chartin"},[n("svg-chart",{attrs:{option:t}})],1)}))},i=[],a={render:s,staticRenderFns:i};e.a=a},W7vk:function(t,e,n){"use strict";var s=n("J+oA");e.a={name:"voting",components:{VoteOption:s.a},computed:{menus:function(){return this.$store.state.menu.all},showNames:function(){return this.$store.state.user.all}},methods:{vote:function(){var t=this.$store.state.auth.currentUser;t&&this.$store.dispatch({type:"vote",userName:t})}}}},WSRv:function(t,e){},WuTF:function(t,e){},YhF4:function(t,e,n){"use strict";e.a={name:"svg-chart",props:["option"],computed:{totalVotes:function(){return this.$store.state.user.all.length},percent:function(){return(this.option.voteCount/this.totalVotes).toFixed(2)},percentStr:function(){return 100*this.percent+" 100"}}}},YmLR:function(t,e){},ZMyu:function(t,e){},bREw:function(t,e,n){"use strict";var s=n("Dd8w"),i=n.n(s),a=n("mtWM"),r=(n.n(a),n("Z8es")),o={all:[{userName:"fd",menuId:"1",id:1},{userName:"cfdv",menuId:"2",id:2},{userName:"dd",menuId:"By3_USf6Z",id:3}],isVoted:!1},c={vote:function(t,e){t.all.push(e),t.isVoted=!0},undo:function(t,e){t.all=t.all.filter(function(t){return t.id!==e})}},u={vote:function(t,e){var n=t.commit,s=e.vote;n("vote",i()({},s,{id:r.generate()}))},undo:function(t,e){(0,t.commit)("undo",e.voteId)}};e.a={state:o,mutations:c,actions:u}},cEfF:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form"},[t.isAuthenticated?n("div",[t._v("\n    我是 "+t._s(t.currentUser)+"\n  ")]):n("div",[t._v("\n    你是\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"newinput",attrs:{placeholder:"你的名字"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.login}},[t._v("保存")])])])},i=[],a={render:s,staticRenderFns:i};e.a=a},egBL:function(t,e,n){"use strict";var s=n("mtWM"),i=(n.n(s),n("Z8es"));console.log();var a={all:[{id:"1",text:"肉末茄子"},{id:"2",text:"西红柿炒鸡蛋"},{text:"热汤面",id:"By3_USf6Z"}]},r={addMenu:function(t,e){t.all.push(e)}},o={addMenu:function(t,e){var n=t.commit,s=e.text,a={text:s,id:i.generate()};console.log(a),n("addMenu",a)}};e.a={state:a,mutations:r,actions:o}},fH0Y:function(t,e){},gosb:function(t,e,n){"use strict";function s(t){n("ZMyu")}var i=n("pFqp"),a=n("cEfF"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,"data-v-372e369f",null);e.a=c.exports},jkTi:function(t,e){},lO7g:function(t,e,n){"use strict";function s(t){n("fH0Y")}var i=n("Fs8J"),a=n("Sx/W"),r=n("VU/8"),o=s,c=r(i.a,a.a,o,null,null);e.a=c.exports},pFqp:function(t,e,n){"use strict";e.a={name:"login-form",data:function(){return{text:""}},computed:{isAuthenticated:function(){return this.$store.state.auth.isAuthenticated},currentUser:function(){return this.$store.state.auth.currentUser}},methods:{login:function(){this.text.trim()&&(this.$store.commit({type:"login",text:this.text}),this.text="")}}}},ve8r:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vote-option"},[n("h2",[t._v(t._s(t.menu.text))]),t._v(" "),n("div",{staticClass:"name-list"},t._l(t.eachShowNames,function(e){return n("div",[t._v("\n      "+t._s(e.userName)+"\n    ")])})),t._v(" "),n("div",{staticClass:"action"},[t.voted?n("div",[n("button",{staticClass:"voted-button",on:{click:t.undo}},[t._v("已投")])]):n("div",[n("button",{on:{click:t.vote}},[t._v("投票")])])])])},i=[],a={render:s,staticRenderFns:i};e.a=a},wh2b:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("home")],1)},i=[],a={render:s,staticRenderFns:i};e.a=a},xJD8:function(t,e,n){"use strict";var s=n("lO7g");e.a={name:"app",components:{Home:s.a}}}},["NHnr"]);
//# sourceMappingURL=app.a0006fbfc64fbd264600.js.map